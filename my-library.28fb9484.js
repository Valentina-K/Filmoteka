!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},a=e.parcelRequire4383;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in l){var a=l[e];delete l[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){l[e]=t},e.parcelRequire4383=a);var o=a("jzQFI"),d=a("8S4BJ"),s=a("5xtVg");const r="queue",n="watched",i=o.default.load(r)??[],c=o.default.load(n)??[],u={empty:document.querySelector(".empty"),gallery:document.querySelector(".js-gallery"),galleryItem:document.querySelector(".gallery"),filter:document.querySelector(".filter-thumb"),preloaderElem:document.querySelector(".preloader"),modal:document.querySelector("[data-modal]"),modalElem:document.querySelector(".modal-content"),closeModalBtn:document.querySelector("[data-modal-close]")};let g,m=!0;u.gallery.style.overflowY="auto",u.closeModalBtn.addEventListener("click",(function(){h(),d.default.clearContent(u.gallery),console.log("isWatch = ",m),y(m?c:i)})),u.galleryItem.addEventListener("click",(function(e){g=i.find((t=>t.id===Number(e.target.id)))??c.find((t=>t.id===Number(e.target.id))),s.default.prepareModalContent(u.modalElem,g),s.default.renderModalBtns(i,c,u.modalElem,Number(e.target.id)),h()})),u.modalElem.addEventListener("click",(function(e){const t=e.target.parentElement.children;if(e.target.classList.contains("queue"))if(e.target.classList.contains("remove")){const l=i.indexOf(g);i.splice(l,1),o.default.save(r,i),e.target.classList.toggle("remove"),e.target.textContent="Add to queue",t[0].removeAttribute("disabled")}else i.push(g),o.default.save(r,i),e.target.classList.toggle("remove"),e.target.textContent="Remove from queue",t[0].setAttribute("disabled","disabled");if(e.target.classList.contains("watched"))if(e.target.classList.contains("remove")){const l=c.indexOf(g);c.splice(l,1),o.default.save(n,c),e.target.classList.toggle("remove"),e.target.textContent="Add to watched",t[1].removeAttribute("disabled")}else c.push(g),o.default.save(n,c),e.target.classList.toggle("remove"),e.target.textContent="Remove from watched",t[1].setAttribute("disabled","disabled")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(u.modal.classList.contains("is-hidden")||h())}));const f=u.filter.querySelectorAll(".filter");for(const e of f)e.addEventListener("change",p);function y(e){const t=d.default.creatGalleryItems(e);d.default.markupContent(t,u.gallery)}function p(e){1===Number(e.target.value)?c.length&&(m=!0,u.empty.style.display="none",d.default.clearContent(u.gallery),u.preloaderElem.classList.toggle("is-hidden"),u.gallery.classList.remove("is-hidden"),y(c),u.preloaderElem.classList.toggle("is-hidden")):i.length&&(m=!1,u.empty.style.display="none",d.default.clearContent(u.gallery),u.preloaderElem.classList.toggle("is-hidden"),u.gallery.classList.remove("is-hidden"),y(i),u.preloaderElem.classList.toggle("is-hidden"))}function h(){u.modal.classList.toggle("is-hidden")}c.length?(u.empty.style.display="none",d.default.clearContent(u.gallery),u.preloaderElem.classList.toggle("is-hidden"),u.gallery.classList.remove("is-hidden"),y(c),u.preloaderElem.classList.toggle("is-hidden")):(u.empty.classList.toggle("is-hidden"),u.gallery.classList.add("is-hidden"))}();
//# sourceMappingURL=my-library.28fb9484.js.map

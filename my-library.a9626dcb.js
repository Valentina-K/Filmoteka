!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},o=e.parcelRequire4383;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in l){var o=l[e];delete l[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){l[e]=t},e.parcelRequire4383=o);var a=o("euqRf"),n=o("jzQFI"),d=o("8S4BJ"),s=o("5xtVg");const r="queue",i="watched",c=n.default.load(r)??[],u=n.default.load(i)??[];(0,a.onAuthStateChanged)(a.auth,(e=>{var t;e?g.btnLogout.style.display="inline-block":(g.btnLogout.style.display="none",t="./index.html",location.href=t)}));const g={empty:document.querySelector(".empty"),gallery:document.querySelector(".js-gallery"),galleryItem:document.querySelector(".gallery"),filter:document.querySelector(".filter-thumb"),preloaderElem:document.querySelector(".preloader"),modal:document.querySelector("[data-modal]"),modalElem:document.querySelector(".modal-content"),closeModalBtn:document.querySelector("[data-modal-close]"),btnLogout:document.querySelector(".btnLogout")};let m,f=!0;g.gallery.style.overflowY="auto",g.closeModalBtn.addEventListener("click",(function(){L(),d.default.clearContent(g.gallery),console.log("isWatch = ",f),p(f?u:c)})),g.galleryItem.addEventListener("click",(function(e){m=c.find((t=>t.id===Number(e.target.id)))??u.find((t=>t.id===Number(e.target.id))),s.default.prepareModalContent(g.modalElem,m),s.default.renderModalBtns(c,u,g.modalElem,Number(e.target.id)),L()})),g.modalElem.addEventListener("click",(function(e){const t=e.target.parentElement.children;if(e.target.classList.contains("queue"))if(e.target.classList.contains("remove")){const l=c.indexOf(m);c.splice(l,1),n.default.save(r,c),e.target.classList.toggle("remove"),e.target.textContent="Add to queue",t[0].removeAttribute("disabled")}else c.push(m),n.default.save(r,c),e.target.classList.toggle("remove"),e.target.textContent="Remove from queue",t[0].setAttribute("disabled","disabled");if(e.target.classList.contains("watched"))if(e.target.classList.contains("remove")){const l=u.indexOf(m);u.splice(l,1),n.default.save(i,u),e.target.classList.toggle("remove"),e.target.textContent="Add to watched",t[1].removeAttribute("disabled")}else u.push(m),n.default.save(i,u),e.target.classList.toggle("remove"),e.target.textContent="Remove from watched",t[1].setAttribute("disabled","disabled")})),g.btnLogout.addEventListener("click",(function(){(0,a.logout)()})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(g.modal.classList.contains("is-hidden")||L())}));const y=g.filter.querySelectorAll(".filter");for(const e of y)e.addEventListener("change",h);function p(e){const t=d.default.creatGalleryItems(e);d.default.markupContent(t,g.gallery)}function h(e){1===Number(e.target.value)?u.length&&(f=!0,g.empty.style.display="none",d.default.clearContent(g.gallery),g.preloaderElem.classList.toggle("is-hidden"),g.gallery.classList.remove("is-hidden"),p(u),g.preloaderElem.classList.toggle("is-hidden")):c.length&&(f=!1,g.empty.style.display="none",d.default.clearContent(g.gallery),g.preloaderElem.classList.toggle("is-hidden"),g.gallery.classList.remove("is-hidden"),p(c),g.preloaderElem.classList.toggle("is-hidden"))}function L(){g.modal.classList.toggle("is-hidden")}u.length?(g.empty.style.display="none",d.default.clearContent(g.gallery),g.preloaderElem.classList.toggle("is-hidden"),g.gallery.classList.remove("is-hidden"),p(u),g.preloaderElem.classList.toggle("is-hidden")):(g.empty.classList.toggle("is-hidden"),g.gallery.classList.add("is-hidden"))}();
//# sourceMappingURL=my-library.a9626dcb.js.map
